# –ê–Ω–∞–ª–∏–∑ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∫–æ–¥–æ–º –∏ —Å—Ö–µ–º–æ–π –ë–î Supabase

## üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **profiles** —Ç–∞–±–ª–∏—Ü–∞ ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
- ‚ùå **–ë—ã–ª–æ**: –ö–æ–¥ –æ–∂–∏–¥–∞–ª `full_name`, `username`, `email`
- ‚úÖ **–°–µ–π—á–∞—Å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `display_name` —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–µ
- **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—è**: `id`, `user_id`, `display_name`, `avatar_url`, `timezone`, `bio`, `phone`, `metadata`

### 2. **availability** —Ç–∞–±–ª–∏—Ü–∞ ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
- ‚ùå **–ë—ã–ª–æ**: `'availabilities'` (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)
- ‚úÖ **–°–µ–π—á–∞—Å**: `'availability'` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)
- ‚ùå **–ë—ã–ª–æ**: `date_utc` (int)
- ‚úÖ **–°–µ–π—á–∞—Å**: `date` (DATE)
- ‚ö†Ô∏è  **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –æ–∂–∏–¥–∞–µ—Ç `intervals_json`, `note` - —ç—Ç–∏—Ö –ø–æ–ª–µ–π –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ
- **–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—è**: `id`, `user_id`, `date`, `status`, `created_at`, `updated_at`

### 3. **rehearsals** —Ç–∞–±–ª–∏—Ü–∞ ‚úÖ **–ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û**
- ‚ùå **–ë—ã–ª–æ**: `location`
- ‚úÖ **–°–µ–π—á–∞—Å**: `venue`
- ‚ùå **–ë—ã–ª–æ**: `rehearsal_participants.profile_id`
- ‚úÖ **–°–µ–π—á–∞—Å**: `rehearsal_participants.user_id`
- ‚ö†Ô∏è  **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `created_by UUID NOT NULL`
- ‚ö†Ô∏è  **–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `is_mandatory`, –Ω–æ —ç—Ç–æ–≥–æ –ø–æ–ª—è –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ

### 4. **projects** —Ç–∞–±–ª–∏—Ü–∞ ‚úÖ **–£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢**
- –ö–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª—è —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ö–µ–º–µ

## üö® –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### A. **availability** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
–ö–æ–¥ –æ–∂–∏–¥–∞–µ—Ç:
- `intervals_json` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å—Ö–µ–º–µ
- `note` - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å—Ö–µ–º–µ

**–†–µ—à–µ–Ω–∏–µ**: –õ–∏–±–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ –ë–î, –ª–∏–±–æ —É–±—Ä–∞—Ç—å –∏–∑ –∫–æ–¥–∞.

### B. **rehearsals** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `created_by`
–í —Å—Ö–µ–º–µ: `created_by UUID REFERENCES profiles(id) NOT NULL`
–í –∫–æ–¥–µ: –ø–æ–ª–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `created_by` –≤ create –º–µ—Ç–æ–¥.

### C. **rehearsals** - –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ `is_mandatory`
–ö–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `is_mandatory: true`, –Ω–æ –ø–æ–ª—è –Ω–µ—Ç –≤ —Å—Ö–µ–º–µ.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. ‚úÖ **profiles.display_name** –≤–º–µ—Å—Ç–æ full_name
2. ‚úÖ **availability** table name (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ)
3. ‚úÖ **availability.date** –≤–º–µ—Å—Ç–æ date_utc
4. ‚úÖ **rehearsals.venue** –≤–º–µ—Å—Ç–æ location
5. ‚úÖ **rehearsal_participants.user_id** –≤–º–µ—Å—Ç–æ profile_id

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ availability table**:
   ```sql
   ALTER TABLE availability 
   ADD COLUMN intervals_json JSONB,
   ADD COLUMN note TEXT;
   ```

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å rehearsals repository** - –¥–æ–±–∞–≤–∏—Ç—å `created_by`:
   ```dart
   'created_by': currentUserId, // –ø–æ–ª—É—á–∏—Ç—å –∏–∑ auth
   ```

3. **–£–±—Ä–∞—Ç—å –∏–∑ rehearsals** - –ø–æ–ª–µ `is_mandatory` (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π repository** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏